(self["webpackChunkhydro_flex_control"]=self["webpackChunkhydro_flex_control"]||[]).push([[7410],{20294:function(e,r,s){var n=s(88178);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var t=s(69333).A;t("51fd9a21",n,!0,{sourceMap:!1,shadowMode:!1})},15843:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return f}});var n,t={uniForms:s(70491).A,uniFormsItem:s(74392).A,uniEasyinput:s(11172).A},a=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("v-uni-view",{staticClass:"pwd-retrieve-container"},[s("uni-forms",{ref:"form",attrs:{value:e.user,labelWidth:"80px"}},[s("uni-forms-item",{attrs:{name:"oldPassword",label:"旧密码"}},[s("uni-easyinput",{attrs:{type:"password",placeholder:"请输入旧密码"},model:{value:e.user.oldPassword,callback:function(r){e.$set(e.user,"oldPassword",r)},expression:"user.oldPassword"}})],1),s("uni-forms-item",{attrs:{name:"newPassword",label:"新密码"}},[s("uni-easyinput",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.user.newPassword,callback:function(r){e.$set(e.user,"newPassword",r)},expression:"user.newPassword"}})],1),s("uni-forms-item",{attrs:{name:"confirmPassword",label:"确认密码"}},[s("uni-easyinput",{attrs:{type:"password",placeholder:"请确认新密码"},model:{value:e.user.confirmPassword,callback:function(r){e.$set(e.user,"confirmPassword",r)},expression:"user.confirmPassword"}})],1),s("v-uni-button",{attrs:{type:"primary"},on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.submit.apply(void 0,arguments)}}},[e._v("提交")])],1)],1)},o=[],u=s(62008),i={data:function(){return{user:{oldPassword:void 0,newPassword:void 0,confirmPassword:void 0},rules:{oldPassword:{rules:[{required:!0,errorMessage:"旧密码不能为空"}]},newPassword:{rules:[{required:!0,errorMessage:"新密码不能为空"},{minLength:6,maxLength:20,errorMessage:"长度在 6 到 20 个字符"}]},confirmPassword:{rules:[{required:!0,errorMessage:"确认密码不能为空"},{validateFunction:function(e,r,s){return s.newPassword===r},errorMessage:"两次输入的密码不一致"}]}}}},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{submit:function(){var e=this;this.$refs.form.validate().then((function(r){(0,u.cO)(e.user.oldPassword,e.user.newPassword).then((function(r){e.$modal.msgSuccess("修改成功")}))}))}}},d=i,l=(s(20294),s(18535)),c=(0,l.A)(d,a,o,!1,null,"6f3b808e",null,!1,t,n),f=c.exports},88178:function(e,r,s){"use strict";s.r(r);var n=s(45522),t=s.n(n),a=s(67643),o=s.n(a),u=o()(t());u.push([e.id,'@charset "UTF-8";\r\n/**\r\n * uni-app内置的常用样式变量\r\n */\r\n/* 主题颜色 */\r\n/* 文字大小 */\r\n/* 字重 */\r\n/* 文字颜色 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-6f3b808e]{background-color:#fff}body.?%PAGE?%[data-v-6f3b808e]{background-color:#fff}.pwd-retrieve-container[data-v-6f3b808e]{padding-top:%?36?%;padding:15px}',""]),r["default"]=u},62008:function(e,r,s){"use strict";s.d(r,{F4:function(){return i},VM:function(){return o},cO:function(){return a},eg:function(){return u}});var n=s(29987),t=s(41325);function a(e,r){var s={oldPassword:e,newPassword:r};return(0,t.A)({url:"/system/user/profile/updatePwd",method:"put",params:s})}function o(){return(0,t.A)({url:"/system/user/profile",method:"get"})}function u(e){return(0,t.A)({url:"/system/user/profile",method:"put",data:e})}function i(e){return(0,n.A)({url:"/system/user/profile/avatar",name:e.name,filePath:e.filePath})}},29987:function(e,r,s){"use strict";s(74423),s(34782),s(2892),s(79432),s(26099),s(21699);var n=s(46920),t=s(84300),a=s(18471),o=s(50771),u=s(27358),i=1e4,d=function(e){var r=!1===(e.headers||{}).isToken;if(e.header=e.header||{},(0,t.gf)()&&!r&&(e.header["Authorization"]="Bearer "+(0,t.gf)()),e.params){var s=e.url+"?"+(0,o.HE)(e.params);s=s.slice(0,-1),e.url=s}return new Promise((function(r,s){uni.uploadFile({timeout:e.timeout||i,url:e.baseUrl||u.baseUrl+e.url,file:e.file||"",fileType:"image",name:e.name||"file",header:e.header,success:function(e){var t=JSON.parse(e.data),u=Number(t.code)||200,i=a.A[u]||t.msg||a.A["default"];200===u||-1===u?r(t):401==u?((0,o.GQ)("登录状态已过期，您可以继续留在该页面，或者重新登录?").then((function(e){e.confirm&&n.A.dispatch("LogOut").then((function(e){uni.reLaunch({url:"/pages/login/login"})}))})),s("无效的会话，或者会话已过期，请重新登录。")):500===u?((0,o.oR)(i),s("500")):200!==u&&((0,o.oR)(i),s(u))},fail:function(e){var r=e.message;"Network Error"==r?r="后端接口连接异常":r.includes("timeout")?r="系统接口请求超时":r.includes("Request failed with status code")&&(r="系统接口"+r.substr(r.length-3)+"异常"),(0,o.oR)(r),s(e)}})}))};r.A=d}}]);